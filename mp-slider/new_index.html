<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <title>mp-slider</title>
  <script src="http://lib.sinaapp.com/js/jquery/1.7.2/jquery.min.js"></script>
  <script type="text/javascript">
  $(function(){
    ;(function($) {
    $.fn.extend({
      "mpSlider":function(options){
        // css object start
        var mpSliderCss = {
            "position": "relative",
            "width": "400px",
            "height": "250px",
            "overflow": "hidden",
        };
        var mpSliderImgCss = {
            "width": "400px",
            "height": "250px"
        };
        var mpSliderRestCss = {
            "padding": "0px",
            "margin": "0px"
        };
        var mpSliderDescriptionCss = {
            "position": "absolute",
            "bottom": "0",
            "opacity": "0.4",
            "width": "400px",
            "font-size": "0px"
        }; 
        var mpSliderItemCss =  {
            "display": "inline-block",
            "width": "80px",
            "text-align": "center",
            "background-color": "rgb(13, 227, 126)",
            "font-size": "20px",
            "cursor": "pointer",
            "overflow": "hidden",
            "height": "24px",
            "box-shadow": "4px 4px 20px #000000"
        };
        var mpSliderDescriptionOnCss = {
            "background-color": "#f4f4f4"
        };
        // css object end
        options = $.extend({
          mpSliderCss: mpSliderCss,
          mpSliderImgCss: mpSliderImgCss,
          mpSliderRestCss: mpSliderRestCss,
          mpSliderDescriptionCss: mpSliderDescriptionCss,
          mpSliderItemCss: mpSliderItemCss,
          mpSliderDescriptionOnCss: mpSliderDescriptionOnCss,
          width: "400px",
          height: "250px"
        }, options);
        
        options.mpSliderCss.width = options.width;
        options.mpSliderCss.height = options.height;

        options.mpSliderImgCss.width = options.width;
        options.mpSliderImgCss.height = options.height;

        var $mpSlider = $(this);
        var $imgs = $("img", this); 
        var $ulElement = $("<ul class='mp-slider-description'/>");
        var liElements = "";
        var sliderTimer = null;
        var index = 0;
        
        $mpSlider.css(options.mpSliderCss);
        $imgs.css(options.mpSliderImgCss);
        
        $imgs.each(function(index){
          liElements += '<li class="mp-slider-item">' + $(this).attr("alt") + '</li>';
        });

        var $liElements = $(liElements)
        $liElements.css(mpSliderItemCss);
        $ulElement.append($liElements);

        $ulElement.css(mpSliderDescriptionCss);
        $mpSlider.append($ulElement);

        // mp-slider-item width
        var $mpSliderItem = $(".mp-slider-item");
        var sliderWidth = $mpSlider.width();
        var mpSliderItemWidth = sliderWidth / $imgs.length;
        $mpSliderItem.each(function(index, el) {
          $(this).width(mpSliderItemWidth);
        });

        // bind mouseover event
        $mpSliderItem.on("mouseover", function(event) {
          /* Act on the event */
          index = $mpSliderItem.index(this);
          showImg(index);
          index++;
        });

        // make index img show and others hide
        function showImg(index){
          $(".mp-slider-img").eq(index).stop(true, true)
            .show()
            .animate({"opacity": "1"}, 1000/2)
            .siblings("img").css("opacity", "0.7").hide();
          
          $mpSliderItem.css(mpSliderItemCss)
            .eq(index).css($.extend(mpSliderItemCss, mpSliderDescriptionOnCss))
        }

        // auto slider
        $mpSlider.hover(function() {
          /* Stuff to do when the mouse enters the element */
          if(sliderTimer){
            clearInterval(sliderTimer);
          }
        }, function() {
          /* Stuff to do when the mouse leaves the element */
          sliderTimer = setInterval(function(){
            showImg(index);
            index++;
            if (index == $imgs.length){
              index = 0;
            }
          }, 4000)
        }).trigger('mouseleave');

      }
    });
    
  })(jQuery);
    $(".mp-slider").mpSlider();  
  })
  
  </script>
</head>
<div>
  <div class="mp-slider">
        <img class="mp-slider-img" alt="one day"  src="http://img2.ph.126.net/c93GGw61JkvXImycyIMazQ==/6619164452816378699.jpg"/>
        <img class="mp-slider-img" alt="second day"  src="http://img2.ph.126.net/mSxCwXuXSyzKncrpS9m4tw==/6619134766002428606.jpg"/>
        <img class="mp-slider-img" alt="ai ni"  src="http://img0.ph.126.net/ccW-1f3wDYzctOoQprx73A==/6619183144514050347.jpg"/>
  </div>
</div>
</html>